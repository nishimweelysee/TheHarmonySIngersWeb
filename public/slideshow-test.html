<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Slideshow Test</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f3f4f6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .test-section {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .media-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .media-card {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            transition: transform 0.2s ease;
        }
        
        .media-card:hover {
            transform: translateY(-2px);
        }
        
        .media-preview {
            position: relative;
            height: 200px;
            overflow: hidden;
        }
        
        .media-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            cursor: pointer;
            transition: transform 0.2s ease;
        }
        
        .media-image:hover {
            transform: scale(1.05);
        }
        
        .media-info {
            padding: 16px;
        }
        
        .media-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 8px;
            color: #111827;
        }
        
        .media-description {
            color: #6b7280;
            font-size: 0.875rem;
            margin-bottom: 12px;
        }
        
        .media-meta {
            display: flex;
            gap: 8px;
            align-items: center;
        }
        
        .badge {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .badge-primary {
            background: rgba(59, 130, 246, 0.1);
            color: #3b82f6;
        }
        
        .album-badge {
            font-size: 0.75rem;
            color: #6b7280;
            background: #f3f4f6;
            padding: 4px 8px;
            border-radius: 4px;
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px 24px;
            border-radius: 6px;
            text-decoration: none;
            font-size: 0.875rem;
            font-weight: 500;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
            background: #3b82f6;
            color: white;
        }
        
        .btn:hover {
            background: #2563eb;
        }
        
        /* Slideshow Modal Styles */
        .slideshow-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
        }
        
        .slideshow-modal.active {
            opacity: 1;
            visibility: visible;
        }
        
        .slideshow-content {
            background: #ffffff;
            border-radius: 12px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            width: 90%;
            max-width: 800px;
            max-height: 90%;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .slideshow-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .slideshow-title {
            margin: 0;
            font-size: 1.25rem;
            font-weight: 600;
            color: #111827;
        }
        
        .close-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: #6b7280;
            cursor: pointer;
            transition: color 0.2s ease;
        }
        
        .close-btn:hover {
            color: #374151;
        }
        
        .slideshow-main {
            position: relative;
            flex-grow: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            min-height: 400px;
        }
        
        .slide-container {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .slide-image {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }
        
        .slide-info {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.7);
            color: #ffffff;
            padding: 16px;
            text-align: left;
        }
        
        .slide-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 8px;
        }
        
        .slide-description {
            font-size: 1rem;
            margin-bottom: 12px;
        }
        
        .slide-meta {
            display: flex;
            gap: 12px;
            font-size: 0.875rem;
            color: #d1d5db;
        }
        
        .slide-album {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .slide-album i {
            color: #3b82f6;
        }
        
        .slide-date {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .slide-date i {
            color: #10b981;
        }
        
        .slideshow-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px;
            border-top: 1px solid #e5e7eb;
        }
        
        .slide-counter {
            font-size: 0.875rem;
            color: #6b7280;
        }
        
        .slide-actions {
            display: flex;
            gap: 12px;
        }
        
        .nav-btn {
            background: #f3f4f6;
            color: #374151;
            border: none;
            border-radius: 6px;
            padding: 8px 12px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .nav-btn:hover {
            background: #e5e7eb;
        }
        
        .nav-btn.prev-btn {
            margin-right: 12px;
        }
        
        .nav-btn.next-btn {
            margin-left: 12px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="test-section">
            <h1>Slideshow Test Page</h1>
            <p>This page demonstrates the slideshow functionality. Click on any image to open the slideshow.</p>
            
            <button class="btn" onclick="testSlideshow()">
                <i class="fas fa-play"></i>
                Test Slideshow
            </button>
        </div>
        
        <div class="test-section">
            <h2>Sample Media Items</h2>
            <div class="media-grid">
                <div class="media-card" data-type="photo" data-media-id="1">
                    <div class="media-preview">
                        <img src="https://picsum.photos/300/200?random=1" alt="Sample Image 1" class="media-image">
                    </div>
                    <div class="media-info">
                        <h4 class="media-title">Sample Image 1</h4>
                        <p class="media-description">This is a sample image for testing the slideshow functionality.</p>
                        <div class="media-meta">
                            <span class="badge badge-primary">Photo</span>
                            <span class="album-badge">
                                <i class="fas fa-images"></i>
                                Test Album
                            </span>
                        </div>
                    </div>
                </div>
                
                <div class="media-card" data-type="photo" data-media-id="2">
                    <div class="media-preview">
                        <img src="https://picsum.photos/300/200?random=2" alt="Sample Image 2" class="media-image">
                    </div>
                    <div class="media-info">
                        <h4 class="media-title">Sample Image 2</h4>
                        <p class="media-description">Another sample image to test navigation between slides.</p>
                        <div class="media-meta">
                            <span class="badge badge-primary">Photo</span>
                            <span class="album-badge">
                                <i class="fas fa-images"></i>
                                Test Album
                            </span>
                        </div>
                    </div>
                </div>
                
                <div class="media-card" data-type="photo" data-media-id="3">
                    <div class="media-preview">
                        <img src="https://picsum.photos/300/200?random=3" alt="Sample Image 3" class="media-image">
                    </div>
                    <div class="media-info">
                        <h4 class="media-title">Sample Image 3</h4>
                        <p class="media-description">Third sample image for complete slideshow testing.</p>
                        <div class="media-meta">
                            <span class="badge badge-primary">Photo</span>
                            <span class="album-badge">
                                <i class="fas fa-images"></i>
                                Test Album
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Slideshow Modal -->
    <div id="slideshowModal" class="slideshow-modal">
        <div class="slideshow-content">
            <div class="slideshow-header">
                <h3 class="slideshow-title">Image Slideshow</h3>
                <button class="close-btn" onclick="closeSlideshow()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="slideshow-main">
                <button class="nav-btn prev-btn" onclick="previousSlide()">
                    <i class="fas fa-chevron-left"></i>
                </button>
                
                <div class="slide-container">
                    <img id="slideImage" src="" alt="" class="slide-image">
                    <div class="slide-info">
                        <h4 id="slideTitle" class="slide-title"></h4>
                        <p id="slideDescription" class="slide-description"></p>
                        <div class="slide-meta">
                            <span id="slideAlbum" class="slide-album"></span>
                            <span id="slideDate" class="slide-date"></span>
                        </div>
                    </div>
                </div>
                
                <button class="nav-btn next-btn" onclick="nextSlide()">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
            
            <div class="slideshow-footer">
                <div class="slide-counter">
                    <span id="currentSlide">1</span> of <span id="totalSlides">0</span>
                </div>
                <div class="slide-actions">
                    <button class="btn" onclick="openMediaEdit()">
                        <i class="fas fa-edit"></i>
                        Edit
                    </button>
                    <button class="btn" onclick="openMediaView()">
                        <i class="fas fa-external-link-alt"></i>
                        View Details
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Sample data for testing
        const imageMediaItems = [
            {
                id: '1',
                title: 'Sample Image 1',
                description: 'This is a sample image for testing the slideshow functionality.',
                imageSrc: 'https://picsum.photos/800/600?random=1',
                album: 'Test Album',
                date: 'Jan 15, 2024'
            },
            {
                id: '2',
                title: 'Sample Image 2',
                description: 'Another sample image to test navigation between slides.',
                imageSrc: 'https://picsum.photos/800/600?random=2',
                album: 'Test Album',
                date: 'Jan 16, 2024'
            },
            {
                id: '3',
                title: 'Sample Image 3',
                description: 'Third sample image for complete slideshow testing.',
                imageSrc: 'https://picsum.photos/800/600?random=3',
                album: 'Test Album',
                date: 'Jan 17, 2024'
            }
        ];
        
        let currentSlideIndex = 0;
        let currentMediaId = null;
        
        // Add click events to images
        document.addEventListener('DOMContentLoaded', function() {
            const mediaCards = document.querySelectorAll('.media-card');
            
            mediaCards.forEach(card => {
                if (card.dataset.type === 'photo') {
                    const imageElement = card.querySelector('.media-image');
                    if (imageElement) {
                        imageElement.addEventListener('click', function() {
                            openSlideshow(card);
                        });
                    }
                }
            });
        });
        
        // Slideshow functions
        function openSlideshow(mediaCard) {
            const modal = document.getElementById('slideshowModal');
            const mediaId = mediaCard.dataset.mediaId;
            
            // Find the index of this media item
            const index = imageMediaItems.findIndex(item => item.id == mediaId);
            if (index !== -1) {
                currentSlideIndex = index;
                currentMediaId = mediaId;
                showSlide(currentSlideIndex);
                modal.classList.add('active');
                
                // Add keyboard event listeners
                document.addEventListener('keydown', handleSlideshowKeys);
            }
        }
        
        function closeSlideshow() {
            const modal = document.getElementById('slideshowModal');
            modal.classList.remove('active');
            
            // Remove keyboard event listeners
            document.removeEventListener('keydown', handleSlideshowKeys);
        }
        
        function showSlide(index) {
            if (imageMediaItems.length === 0) return;
            
            const item = imageMediaItems[index];
            const slideImage = document.getElementById('slideImage');
            const slideTitle = document.getElementById('slideTitle');
            const slideDescription = document.getElementById('slideDescription');
            const slideAlbum = document.getElementById('slideAlbum');
            const slideDate = document.getElementById('slideDate');
            const currentSlideSpan = document.getElementById('currentSlide');
            const totalSlidesSpan = document.getElementById('totalSlides');
            
            slideImage.src = item.imageSrc;
            slideImage.alt = item.title;
            slideTitle.textContent = item.title;
            slideDescription.textContent = item.description;
            slideAlbum.innerHTML = `<i class="fas fa-images"></i> ${item.album}`;
            slideDate.innerHTML = `<i class="fas fa-calendar"></i> ${item.date}`;
            currentSlideSpan.textContent = index + 1;
            totalSlidesSpan.textContent = imageMediaItems.length;
            
            // Update navigation button states
            updateNavigationButtons();
        }
        
        function nextSlide() {
            if (currentSlideIndex < imageMediaItems.length - 1) {
                currentSlideIndex++;
                showSlide(currentSlideIndex);
            }
        }
        
        function previousSlide() {
            if (currentSlideIndex > 0) {
                currentSlideIndex--;
                showSlide(currentSlideIndex);
            }
        }
        
        function updateNavigationButtons() {
            const prevBtn = document.querySelector('.prev-btn');
            const nextBtn = document.querySelector('.next-btn');
            
            prevBtn.disabled = currentSlideIndex === 0;
            nextBtn.disabled = currentSlideIndex === imageMediaItems.length - 1;
            
            prevBtn.style.opacity = currentSlideIndex === 0 ? '0.5' : '1';
            nextBtn.style.opacity = currentSlideIndex === imageMediaItems.length - 1 ? '0.5' : '1';
        }
        
        function handleSlideshowKeys(event) {
            switch (event.key) {
                case 'ArrowLeft':
                    previousSlide();
                    break;
                case 'ArrowRight':
                    nextSlide();
                    break;
                case 'Escape':
                    closeSlideshow();
                    break;
            }
        }
        
        function testSlideshow() {
            // Open slideshow with first item
            currentSlideIndex = 0;
            currentMediaId = imageMediaItems[0].id;
            showSlide(0);
            
            const modal = document.getElementById('slideshowModal');
            modal.classList.add('active');
            
            // Add keyboard event listeners
            document.addEventListener('keydown', handleSlideshowKeys);
        }
        
        function openMediaEdit() {
            alert('Edit functionality would open here for media ID: ' + currentMediaId);
        }
        
        function openMediaView() {
            alert('View details would open here for media ID: ' + currentMediaId);
        }
        
        // Close slideshow when clicking outside the content
        document.getElementById('slideshowModal').addEventListener('click', function(event) {
            if (event.target === this) {
                closeSlideshow();
            }
        });
    </script>
</body>
</html>
